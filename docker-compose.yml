version: "3"
services:
 db:
  image: mysql:latest
  container_name: db
  ports:
   - 3306:3306
  volumes:
   - ./mysql_data:/var/lib/mysql
   - ./data/simple-docker-php.sql:/docker-entrypoint-initdb.d/simple-docker-php.sql
  environment:
   MYSQL_ROOT_PASSWORD: 12345
   MYSQL_DATABASE: simple_db
   MYSQL_USER: user
   MYSQL_PASSWORD: password
 app:
  image: alexeychusta/simple-php-app
  container_name: app
  ports:
   - 8080:80
  restart: always
  depends_on:
   - db
 nginx:
  image: nginx:1.19.3-alpine
  container_name: nginx
  volumes:
   - ./etc/nginx/default.conf:/etc/nginx/conf.d/default.conf
  ports:
   - 80:80
  depends_on:
   - app


